<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Report - Hill View School</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <a href="#" class="navbar-brand">Hill View School</a>
        <ul class="navbar-nav">
            <li class="nav-item"><a href="{{ url_for('teacher') }}" class="nav-link">Dashboard</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Reports</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Help</a></li>
            <li class="nav-item"><a href="{{ url_for('index') }}" class="logout-btn">Logout</a></li>
        </ul>
    </nav>

    <div class="container" style="max-width: var(--container-lg); margin-top: 80px;">
        <div class="dashboard-card">
            <div class="card-header">
                <span>Report: {{ subject }} - Grade {{ grade }} Stream {{ stream }}</span>
                <small>{{ education_level }} | {{ term|replace('_', ' ')|title }} | {{ assessment_type|title }}</small>
            </div>

            <div class="report-summary">
                <div>
                    <strong>Subject:</strong> {{ subject }}
                </div>
                <div>
                    <strong>Total Marks:</strong> {{ total_marks }}
                </div>
                <div>
                    <strong>Mean Score:</strong> {{ "%.2f"|format(mean_score) }} ({{ "%.1f"|format(mean_percentage) }}%)
                </div>
            </div>

            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Marks (Out of {{ total_marks }})</th>
                            <th>Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in data %}
                        <tr>
                            <td>{{ item[0] }}</td>
                            <td>{{ item[1] }}</td>
                            <td>{{ item[2] }}%</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="text-center mt-4">
                <a href="{{ url_for('generate_pdf', grade=grade, stream=stream, subject=subject) }}" class="btn">
                    Download PDF Report
                </a>
                <p>Click above to download a PDF copy of this report.</p>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2025 Hill View School - All Rights Reserved</p>
    </footer>
</body>
</html>